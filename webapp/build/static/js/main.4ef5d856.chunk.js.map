{"version":3,"sources":["App.tsx","debounce.ts","index.tsx"],"names":["provider","window","ethereum","blocks","Blocks","App","useState","timestamp","setTimestamp","isLoading","setIsLoading","block","setBlock","debouncedTimestamp","value","delay","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","a","enable","getDate","found","console","log","message","getLatestBlock","undefined","getBlock","className","href","target","rel","type","placeholder","onChange","e","ReactDOM","render","document","getElementById"],"mappings":"ucAOIA,E,OAGFA,EADGC,OAAeC,SACND,OAAeC,SAEhB,gEAGb,IAAMC,EAAS,IAAIC,IAAOJ,GAgFXK,MA9Ef,WAAgB,IAAD,EACqBC,qBADrB,mBACNC,EADM,KACKC,EADL,OAEqBF,oBAAS,GAF9B,mBAENG,EAFM,KAEKC,EAFL,OAGaJ,qBAHb,mBAGNK,EAHM,KAGCC,EAHD,KAKPC,ECpBO,SAAqBC,EAAYC,GAAgB,IAAD,EACjBT,mBAASQ,GADQ,mBACtDE,EADsD,KACtCC,EADsC,KAiB7D,OAdAC,qBACE,WACE,IAAMC,EAAUC,YAAW,WACzBH,EAAkBH,KACjBC,GAEH,OAAO,WACLM,aAAaF,MAIjB,CAACL,EAAOC,IAGHC,EDGoBM,CAAYf,EAAW,KA2ClD,OAzCAW,qBAAU,WAAM,4CACd,8BAAAK,EAAA,2DACQvB,EAAYC,OAAeC,WACU,oBAApBF,EAASwB,OAFlC,gCAGUxB,EAASwB,SAHnB,cAMEd,GAAa,GANf,kBAUkBP,EAAOsB,QAAQ,UAVjC,OAUIC,EAVJ,yDAYIC,QAAQC,IAAI,KAAEC,SAZlB,QAcEjB,EAASc,EAAQA,EAAMf,MAAQ,GAC/BD,GAAa,GAff,2DADc,uBAAC,WAAD,wBAmBdoB,KACC,IAEHZ,qBAAU,WAAM,4CACd,WAAwBX,GAAxB,eAAAgB,EAAA,0DACMhB,EADN,wBAEIG,GAAa,GAFjB,kBAKoBP,EAAOsB,QAAQlB,GALnC,OAKMmB,EALN,uDAOMC,QAAQC,IAAI,KAAEC,SAPpB,QAUIjB,EAASc,EAAQA,EAAMf,WAAQoB,GAC/BrB,GAAa,GAXjB,0DADc,uBAAC,SAAD,2BAgBdsB,CAASnB,KACR,CAACA,IAGF,yBAAKoB,UAAU,OACb,4BAAK,wBACL,uBAAGA,UAAU,SACX,uBACEC,KAAI,qCAAgCvB,GACpCwB,OAAO,SACPC,IAAI,uBAEHzB,IAGL,uBAAGsB,UAAU,WAAWxB,EAAY,aAAe,MACnD,2BACE4B,KAAK,SACLC,YAAa,oCACbC,SAAU,SAACC,GAAD,OAAOhC,EAAagC,EAAEL,OAAOrB,UAEzC,uBACEmB,UAAU,SACVC,KAAK,sDACLC,OAAO,SACPC,IAAI,uBAEH,eEpFTK,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.4ef5d856.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\n\nimport Blocks from 'eth-block-timestamp'\nimport useDebounce from './debounce'\n\nimport './App.css'\n\nlet provider\n\nif ((window as any).ethereum) {\n  provider = (window as any).ethereum\n} else {\n  provider = 'https://mainnet.infura.io/v3/02e880217a8b4077bc05fcab2ee1d922'\n}\n\nconst blocks = new Blocks(provider)\n\nfunction App() {\n  const [timestamp, setTimestamp] = useState<string>()\n  const [isLoading, setIsLoading] = useState(false)\n  const [block, setBlock] = useState<number>()\n\n  const debouncedTimestamp = useDebounce(timestamp, 500)\n\n  useEffect(() => {\n    async function getLatestBlock() {\n      const provider = (window as any).ethereum\n      if (provider && typeof provider.enable === 'function') {\n        await provider.enable()\n      }\n\n      setIsLoading(true)\n      let found\n\n      try {\n        found = await blocks.getDate('latest')\n      } catch (e) {\n        console.log(e.message)\n      }\n      setBlock(found ? found.block : 0)\n      setIsLoading(false)\n    }\n\n    getLatestBlock()\n  }, [])\n\n  useEffect(() => {\n    async function getBlock(timestamp?: string) {\n      if (timestamp) {\n        setIsLoading(true)\n        let found\n        try {\n          found = await blocks.getDate(timestamp)\n        } catch (e) {\n          console.log(e.message)\n        }\n\n        setBlock(found ? found.block : undefined)\n        setIsLoading(false)\n      }\n    }\n\n    getBlock(debouncedTimestamp)\n  }, [debouncedTimestamp])\n\n  return (\n    <div className=\"App\">\n      <h1>{'Block Number By Date'}</h1>\n      <p className=\"block\">\n        <a\n          href={`https://etherscan.io/block/${block}`}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          {block}\n        </a>\n      </p>\n      <p className=\"loading\">{isLoading ? 'Loading...' : null}</p>\n      <input\n        type=\"string\"\n        placeholder={'latest | first | timestamp | date'}\n        onChange={(e) => setTimestamp(e.target.value)}\n      />\n      <a\n        className=\"footer\"\n        href=\"https://github.com/nachomazzara/eth-block-timestamp\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        {'< code />'}\n      </a>\n    </div>\n  )\n}\n\nexport default App\n","import { useState, useEffect } from 'react';\n\nexport default function useDebounce(value: any, delay: number) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(\n    () => {\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n\n    [value, delay]\n  );\n\n  return debouncedValue;\n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}